

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Client Data</title>
  <meta charset="utf-8">
  <link rel="manifest" href="assets/site.webmanifest">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="assets/css/customStyle.css?v=1.0">
    <style>
      h1 {
        color: #250694;
        font-size: 5rem;
        text-align: center;
      }
      .bgSquare{
        height: 215px;
      }
    </style>
</head>
<body>


<section class="entry-form-sec">
  <div class="container">
    <div class="bgSquare"></div>
    <div class="entry-form" id="entry-form">
      <div class="col-md-12">
        <img class="logoForm" src="./assets/images/company-logo.png" alt=""> 
      </div>
      
      <form action="https://script.google.com/macros/s/AKfycbwsG_udq5z9GwE1EcDvAN28280UN8aQ-EdSoIwJVglpW5VbCESV6OXuph5ayFTwQt_DGw/exec" method="POST" id="formValues">
        <div class="row login-form">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="">Name</label>
              <input class="form-control required" name="name">
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-3">
              <label for="">Password</label>
              <input type="password" class="form-control password required" name="password">
            </div>
          </div>
          <div class="d-flex justify-content-end">
            <div class="col-md-4">
              <button type="button" class="btn btn-primary mt-3 next-btn">Next</button>
            </div>
          </div>
        </div>
        <div class="row login-depend d-none">
          <h1 class="not-found"></h1>
          <h3 class="user-name">User name</h3>
          <div class="col-12">
            <table class="form-tabel">
              <thead>
                  <tr>
                      <th width="20%">Exercises</th>
                      <th width="10%">Sets</th>
                      <th width="20%">Reps</th>
                      <th width="20%">Set/ W1</th>
                      <th width="10%">Set/ W2</th>
                      <th width="10%">Set/ W3</th>
                      <th width="10%">Set/ W4</th>
                      <th width="10%">Set/ W5</th>
                      <th width="10%">Set/ W6</th>
                      <th width="10%">Set/ W7</th>
                      <th width="10%">Set/ W8</th>
                  </tr>
              </thead>
              <tbody class="products"></tbody>
            </table>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://kit.fontawesome.com/786d0bd98a.js" crossorigin="anonymous"></script>
<script src="assets/js/ResizeSensor.js"></script>
<script src="assets/js/custom.js"></script>
<script> 

  function appendData(data)
  {
    if(data.length > 0)
    {
      $('.not-found').empty()
      $('.user-name').empty()
      $('.user-name').append("Data of "+data[0][0])
      $('.form-tabel').empty()
      $('.form-tabel').append(`
      <tbody>
        <tr>
          <th width="20%">Exercises</th>
          <td>`+data[0][1]+`</td>
        </tr>
        <tr>
          <th width="10%">Sets</th>
          <td>`+data[0][2]+`</td>
        </tr>
        <tr>
          <th width="20%">Reps</th>
          <td>`+data[0][3]+`</td>
        </tr>
        <tr>
          <th width="20%">Set/ W1</th>
          <td>`+data[0][4]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W2</th>
          <td>`+data[0][5]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W3</th>
          <td>`+data[0][6]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W4</th>
          <td>`+data[0][7]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W5</th>
          <td>`+data[0][8]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W6</th>
          <td>`+data[0][9]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W7</th>
          <td>`+data[0][10]+`</td>
        </tr>
        <tr>
          <th width="10%">Set/ W8</th>
          <td>`+data[0][11]+`</td>
        </tr>
      </tbody>
      `)
    }
    else
    {
      $('.not-found').empty()
      $('.user-name').empty()
      $('.not-found').append("Data not found")
      $('.form-tabel').empty()
    }
    
  }

  // check password
  $(document).on('click','.next-btn',function(e){ 
    e.preventDefault();

    if(!validate()){
        return false;
    }

    var form = $("#formValues");
    $('.next-btn').attr('disabled', 'disabled');
    $('.next-btn').text('Checking password...');
    var url_gsheet = $('#formValues').attr("action");

    $.ajax({
        type:"POST",
        url: url_gsheet,
        data: $(form).serialize(),
        success: function(response){
            if(response.result == "success"){
                $('.login-depend').removeClass('d-none')
                $('.login-form').addClass('d-none')
                appendData(response.data)
            }
            else if(response.result == "not match")
            {
                swal({
                    title: "Error!",
                    text: "Wrong Credentials",
                    icon: "error",
                }).then(function () {
                    $('.next-btn').removeAttr('disabled');
                    $('.next-btn').text('Next');
                });
            }
            else{
                swal({
                    title: "Error!",
                    text: response.error,
                    icon: "error",
                }).then(function () {
                    $('.next-btn').removeAttr('disabled');
                    $('.next-btn').text('Next');
                });
            }
        },
        error: function(response){
            swal({
                title: "Error!",
                text: "Something went wrong",
                icon: "error",
            }).then(function() {
                $('.next-btn').removeAttr('disabled');
                $('.next-btn').text('Next');
            });
        }
    });
  })
</script>
</body>
</html>
